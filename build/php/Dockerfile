FROM php:5.6-fpm

MAINTAINER Andre Luiz <andreluizs@live.com>

# extensions
RUN apt-get update && apt-get install -y \
        libfreetype6-dev \
        libjpeg62-turbo-dev \
        libmcrypt-dev \
        libpng12-dev \
        git \
        zip \
    && docker-php-ext-install -j$(nproc) iconv mcrypt \
    && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \
    && docker-php-ext-install -j$(nproc) gd


# composer
RUN curl -sS https://getcomposer.org/installer | \
    php -- --install-dir=/usr/bin/ --filename=composer

# localtime
RUN rm /etc/localtime
RUN ln -s /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime

# mysql
RUN docker-php-ext-install pdo pdo_mysql opcache mcrypt iconv

# npm
RUN apt-get install -y -qq npm
RUN ln -s /usr/bin/nodejs /usr/bin/node

# bower
RUN npm install --global bower

# config php.ini
COPY build/php/php.ini /usr/local/etc/php/

EXPOSE 9000

WORKDIR /usr/share/nginx/html





